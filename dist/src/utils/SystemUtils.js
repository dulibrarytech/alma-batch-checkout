"use strict";import{inject}from"aurelia-framework";import{HttpClient,json}from"aurelia-fetch-client";import{Configuration}from"../../config/Configuration";export class SystemUtils{constructor(e,t){this.http=e,this.config=t,void 0!==e&&(t.session.token,e.configure(e=>{e.withBaseUrl(this.config.serverUrl).withDefaults({headers:{Accept:"application/json","client-id-header":this.config.clientIDHeader,"x-access-token":null}})})),this.spinner=new Spinner({zIndex:2e9,className:"spinner",top:"350px",left:"50%",shadow:!1,hwaccel:!1,position:"relative"})}doAjax(e,t,n,s){var i={method:t};if("get"==t&&null!=n){var o="?";for(var r in n)o+=r+"="+n[r]+"&";e+=o.slice(0,-1)}else"get"!=t&&(i.body=json(n));this.http.defaults.headers["x-access-token"]=this.config.session.token;var a=document.getElementById(this.config.mainContentDiv);return a&&(this.startSpinner(),a.appendChild(this.spinner.el)),this.http.fetch(e,i).then(e=>e.json()).then(e=>(this.stopSpinner(),e))}startSpinner(){this.spinner.spin()}stopSpinner(){this.spinner.stop()}sendMessage(e){for(var t=document.getElementsByClassName("message"),n=0;n<t.length;n++)t[n].innerHTML=e;setTimeout(function(){for(var e=0;e<t.length;e++)t[e].innerHTML=""},3e3)}clearMessages(){for(var e=document.getElementsByClassName("message"),t=0;t<e.length;t++)e[t].innerHTML=""}logout(){this.config.session.data={},this.config.session.token="",document.location.reload()}};SystemUtils.inject=[HttpClient,Configuration];